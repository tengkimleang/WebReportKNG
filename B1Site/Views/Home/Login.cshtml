@model B1Site.Models.Home.MasterViewHome;
@{
    ViewData["Title"] = "Login";
    Layout = null;
}
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="theme-color" content="#000000">
    <title>@ViewData["Title"]</title>
    <!-- <link rel="stylesheet" href="admin.css"> -->
    <link rel="stylesheet" href="~/css/app-dark.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <style type="text/css">
        .overflow-y-scroll {
            overflow-y: scroll !important;
        }
    </style>
</head>

<body data-topbar="dark" data-layout="horizontal" data-sidebar-size="" data-layout-size="fluid" data-layout-scrollable="false" style="background-color: rgb(6, 52, 83);">
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root">
        <!-- <div class="home-btn d-none d-sm-block"><a class="text-dark" href="/">asdasd</a></div> -->
        <div class="account-pages my-3 pt-sm-3">
            <div class="container">
                <div class="justify-content-center row">
                    <div class="col-md-8 col-lg-6 col-xl-5">
                        <div class="overflow-hidden card">
                            <div class="bg-soft-primary">
                                <div class="row">
                                    <div class="col-7 col">
                                        <div class="text-primary p-4">
                                            <h5 class="text-primary">Welcome Back !</h5>
                                            <p>Sign in to continue to.</p>
                                        </div>
                                    </div>
                                    <div class="col-5 align-self-end col"><img src="~/image/login1.png" alt="" class="img-fluid"></div>
                                </div>
                            </div>
                            <div class="pt-0 card-body">
                                <div>
                                    <a href="/">
                                        <div class="avatar-md profile-user-wid mb-4"><img src="~/image/SaplogoLogin.png" alt="" height="60%" width="100%" style="border: 0px solid rgba(85, 110, 230, .25);"></div>
                                    </a>
                                </div>
                                <div class="p-2">
                                    <form class="form-horizontal av-valid needs-validation" novalidate style="color: #a6b0cf;">
                                        <div class="form-group">
                                            <div class="form-group">
                                                <label for="email" class="">Username</label>
                                                <input required placeholder="Enter Username" id="Username" type="text" class="form-control is-untouched is-pristine av-valid form-control">
                                                <div class="invalid-feedback">Require Username</div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="form-group">
                                                <label for="password" class="">Password</label>
                                                <input required placeholder="Enter Password" id="Password" type="password" class="is-untouched is-pristine av-valid form-control">
                                                <div class="invalid-feedback">Require Password</div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="form-group">
                                                <label for="password" class="">Select Company</label>
                                                <select type="text" class="is-untouched is-pristine av-valid form-control" id="databaseSAP">
                                                    @{
                                                        foreach (var a in Model.CompanyDatabases)
                                                        {
                                                            <option value="@a.DataBaseName">@a.DataBaseName</option>
                                                        }
                                                    }
                                                </select>
                                                <div class="invalid-feedback">Require Password</div>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <button class="btn btn-primary btn-block waves-effect waves-light" type="submit" style="background:rgb(6, 52, 83);border:1px solid rgb(6, 52, 83);">Log In</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="mt-1 mt-sm-4 text-center" style="color: white;">
                            <p>© 2021 Copy Right<i class="mdi mdi-heart text-danger"></i> by Netsys</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="fb-root" class=" fb_reset">
        <div style="position: absolute; top: -10000px; width: 0px; height: 0px;">
            <div></div>
        </div>
    </div>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script>
        var form = document.getElementsByClassName('needs-validation');
        var Validation = Array.prototype.filter.call(form, function (forms) {
        forms.addEventListener('submit', function (event) {
            if (forms.checkValidity() === false) {
                event.preventDefault();
            } else {
                event.preventDefault();
                $.ajax({
                        url: '@Url.Action("GetLoginAdmin", "Home")',
                    type: 'GET',
                    dataType: 'JSON',
                    data: { userName: $('#Username').val(), password: $('#Password').val(), databaseSAP: $('#databaseSAP').val()},
                    success: function (data) {
                        if (data.id != 0) {
                            window.location.href = '@Url.Action("Index", "Home")';
                        } else {
                            alert("login failed");
                        }
                    }
                    });
            }
            forms.classList.add('was-validated');
        }, false)
        });
        if (event.altKey == true && event.keyCode == 0) { alert("ALT + F4 being pressed"); }
        function handleWindowClose() {
            if ((window.event.clientX < 0) || (window.event.clientY < 0)) {
                event.returnValue = "If you have made any changes to the fields without clicking the Save button, your changes will be lost.";
            }
        }
    </script>
</body>
</html>